import{c as a,u as F,w as R,d as z,j as e,W as B,X as T,Z as E,_ as O,I as P,$ as U,z as A,J as L,p as M,q as _,A as H,B as h}from"./index-C7IDMRLB.js";import{M as J}from"./index-ydYAXTdr.js";import{R as V}from"./quill.snow-BioxtEoY.js";import{S as W,f as G}from"./swiper-react-BVLcEsRZ.js";import"./isEqual-CwlUOuli.js";const Q=L.div`
  min-width: ${({width:t})=>t?`${t}px`:"25px"};
  min-height: ${({height:t})=>t?`${t}px`:"25px"};
  width: ${({width:t})=>t?`${t}px`:"25px"};
  height: ${({height:t})=>t?`${t}px`:"25px"};
`,X=H({postCode:h(),inquiryTitle:h(),inquiryDetail:h()}),te=()=>{const[t,j]=a.useState("구분"),[d,p]=a.useState(!1),b=F(),w=sessionStorage.getItem("name"),y=parseInt(sessionStorage.getItem("id")),N=sessionStorage.getItem("roleCode"),C=R(),[x,g]=a.useState([]),[m,v]=a.useState([]),u=a.useRef(null),{handleSubmit:S,setValue:o,register:k}=z({resolver:A(X)}),$=s=>{const l=s.target.files&&s.target.files;if(console.log(l),l){const i=Array.from(l);v(i);const c=i.map(r=>URL.createObjectURL(r));g(c)}u.current&&(u.current.value="")},I=s=>{const l=x.indexOf(s);l!==-1&&(g(i=>i.filter((c,r)=>r!==l)),v(i=>i.filter((c,r)=>r!==l)))},D=async s=>{const{inquiryDetail:l,inquiryTitle:i,postCode:c}=s,r={postCode:c,inquiryTitle:i,inquiryDetail:l,roleCode:N,id:y};console.log(r);const f=new FormData;f.append("req",new Blob([JSON.stringify(r)],{type:"application/json"})),m.forEach(n=>{f.append("reviewPics",n)});try{await M.post("/api/system/v3/post",f,{headers:{Authorization:`Bearer ${C}`}}),_.fire({title:"게시글 등록에 성공하였습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(n=>{n.isConfirmed&&b("/service/notice")})}catch(n){console.log(n)}},q=s=>{D(s)};return a.useEffect(()=>{console.log("프리뷰",x),console.log("이미지 파일",m)},[m,x]),a.useEffect(()=>{o("inquiryDetail",""),o("inquiryTitle",""),o("postCode","")},[]),e.jsxs("div",{className:"relative w-full h-dvh bg-white overflow-y-auto scrollbar-hide z-10 flex flex-col",children:[e.jsx(B,{}),e.jsx("div",{className:"mt-[150px] flex-grow",children:e.jsxs("form",{onSubmit:S(q),children:[e.jsxs("div",{className:"flex justify-center relative",children:[e.jsxs("div",{className:"flex w-[1280px] justify-between z-10",children:[e.jsxs("div",{className:`relative border border-slate-300 w-[100px] text-[16px] bg-white ${d?"rounded-t-[5px]":"rounded-[5px]"}`,children:[e.jsxs("div",{className:"flex gap-1 justify-between py-1 cursor-pointer px-3 w-[100px] items-center",onClick:()=>p(!d),children:[e.jsx("div",{children:t}),d?e.jsx(T,{}):e.jsx(E,{})]}),d&&e.jsxs("div",{className:"absolute left-[-1px] bg-white w-[100px] px-3 border border-collapse border-slate-300 rounded-b-[5px]",children:[e.jsx("div",{className:"py-1 cursor-pointer",onClick:()=>{j("문의사항"),o("postCode","00202"),p(!1)},children:"문의사항"}),e.jsx("div",{className:"py-1 cursor-pointer",onClick:()=>{j("불편사항"),o("postCode","00203"),p(!1)},children:"불편사항"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 h-[34px]",children:[e.jsx(O,{className:"text-[30px]"}),e.jsx("div",{className:"text-[20px]",children:w})]})]}),e.jsx("div",{className:"absolute mt-20",children:e.jsx("div",{className:"flex w-[1280px] text-[20px]",children:e.jsx("div",{className:"border border-darkGray w-full rounded-[5px] overflow-hidden",children:e.jsx("input",{type:"text",placeholder:"제목을 입력해주세요",className:"px-4 py-2 w-full",...k("inquiryTitle")})})})})]}),e.jsx("div",{className:"flex justify-center relative mt-32",children:e.jsx("div",{className:"flex w-[1280px] h-[450px] border-collapse border border-black justify-between z-10 rounded-[5px] overflow-hidden",children:e.jsx(V,{className:"h-[450px] w-full rounded-[5px]",placeholder:"문의 및 불편사항을 남겨주세요.",readOnly:!1,modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike"]]},onChange:s=>o("inquiryDetail",s),formats:["header","bold","italic","underline","strike","bullet"]})})}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsxs("div",{className:"flex gap-5 w-[1280px] h-[85px] z-10 items-center",children:[e.jsx("div",{className:"text-[20px] text-black",children:"첨부파일"}),e.jsxs("label",{htmlFor:"fileinput",className:"flex items-center gap-[2px] cursor-pointer border-2 border-dashed px-4 py-2 border-slate-300 rounded-lg",children:[e.jsx("div",{children:"파일선택"}),e.jsx(J,{className:"text-[20px]"})]}),e.jsx("input",{type:"file",id:"fileinput",ref:u,accept:"image/png, image/jpeg",onChange:s=>$(s),className:"absolute left-[-5000px]"}),e.jsx(W,{slidesPerView:2,spaceBetween:"5px",className:"w-[200px]",children:x.map((s,l)=>e.jsx(G,{className:"min-w-[85px]",children:e.jsxs(Q,{width:85,height:85,className:"relative",children:[e.jsx("img",{src:s,alt:`preview-${l}`,className:"w-full h-full object-cover"}),e.jsx("div",{className:"w-[24px] h-[24px] cursor-pointer absolute top-0 right-0 rounded-full bg-black text-white p-[2px]",children:e.jsx(P,{onClick:()=>I(s),className:"w-full h-full"})})]},l)}))})]})}),e.jsx("div",{className:"flex justify-center mt-5",children:e.jsxs("div",{className:"flex gap-5 w-[1280px] z-10 justify-center items-center",children:[e.jsx("button",{type:"button",onClick:()=>b(-1),className:"px-6 py-2.5 border border-gray rounded-lg",children:"취소"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-primary text-white rounded-lg",children:"작성완료"})]})})]})}),e.jsx(U,{})]})};export{te as default};
