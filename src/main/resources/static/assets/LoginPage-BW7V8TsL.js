import{u as U,R as d,l as B,i as H,a as N,b as O,c,d as _,e as M,r as Y,j as e,L as P,H as V,C as q,I as z,T as G,f as J,g as K,U as g,S as p,h as I,k as h,F as Q,m as D,n as v,o as W,p as f,q as l,s as u,t as X,v as Z}from"./index-QD4sUlUr.js";function ts(){const n=U(),[y,S]=d(B),[$,k]=d(H),[ss,C]=d(N);d(O);const[o,w]=c.useState({id:"",pw:""}),[x,j]=c.useState(!1),T=sessionStorage.getItem("userId"),L=sessionStorage.getItem("restaurantId"),{handleSubmit:b}=_(),a=M(Y),R=()=>{a===g?n("/user"):a===p?n("/store"):a===I?n("/company"):a===h&&n("/admin")},E=async()=>{try{if(a===g){const s=(await l.post("/api/user/sign-in",o)).data.resultData;C({companyId:s.companyId,companyName:s.companyName,email:s.email,name:s.name,phone:s.phone,pic:s.pic,point:s.point,roleId:s.roleId,uid:s.uid,userId:s.userId}),console.log(s);const i=s.userId||T,r=s.accessToken;window.sessionStorage.setItem("userId",i),u(r),S(!0)}else if(a===p){const t=await l.post("/api/admin/sign-in",o);console.log(t.data.resultData);const s=t.data.resultData,i=s.divisionId||L,r=s.adminId,m=s.coalitionState,F=s.accessToken;window.sessionStorage.setItem("adminId",r),window.sessionStorage.setItem("restaurantId",i),window.sessionStorage.setItem("coalitionState",m),u(F),k(!0),X(i)}else if(a===I){const t=await l.post("/api/admin/sign-in",o);console.log(t.data.resultData);const s=t.data.resultData,i=s.adminId,r=s.divisionId,m=s.accessToken;window.sessionStorage.setItem("adminId",i),window.sessionStorage.setItem("companyId",r),u(m)}else if(a===h){const t=await l.post("/api/admin/sign-in",o);console.log(t.data.resultData);const s=t.data.resultData,i=s.adminId,r=s.accessToken;window.sessionStorage.setItem("adminId",i),u(r)}S(!0),R()}catch(t){Z.fire({title:"아이디와 비밀번호가 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),console.log(t)}},A=()=>{E()};return c.useEffect(()=>{y&&n(-1)},[]),c.useEffect(()=>{o.id&&o.pw?j(!0):j(!1)},[o]),e.jsxs(P,{children:[e.jsx(V,{children:e.jsx(q,{children:e.jsx(z,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>n(-1)})})}),e.jsxs(G,{children:[e.jsx(J,{src:"/logo.png",alt:"로고"}),e.jsx(K,{children:a===g?"사용자":a===p?"사장님":a===I?"회사":a===h?"시스템":""})]}),e.jsx(Q,{children:e.jsxs("form",{onSubmit:b(A),children:[e.jsx(D,{children:e.jsx(v,{type:"text",placeholder:"아이디",value:o.id,onChange:t=>w({...o,id:t.target.value})})}),e.jsx(D,{children:e.jsx(v,{type:"password",value:o.pw,placeholder:"비밀번호 (8-16자)",onChange:t=>w({...o,pw:t.target.value})})}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(W,{type:"submit",style:{backgroundColor:x?"#6F4CDB":"#ddd"},disabled:!x,children:"로그인"})})]})}),e.jsx(f,{onClick:()=>n("/auth/findid"),children:"아이디 찾기"}),e.jsx(f,{style:{color:"#bababa"},children:"I"}),e.jsx(f,{onClick:()=>n("/auth/findpw"),children:"비밀번호 찾기"})]})}export{ts as default};
