import{u as D,c as B,e as $,r as F,d as I,j as e,L as k,H as L,C as R,V as T,T as V,F as E,m as h,n as x,Y as f,o as q,W as O,X as U,U as Y,q as g,S as _,v as j,Z as A,_ as p}from"./index-QD4sUlUr.js";const H=A({name:p().required("이름은 필수입니다.").min(2,"이름은 최소 2자 이상이어야 합니다."),email:p().required("이메일은 필수입니다.").email("올바른 이메일 형식이 아닙니다.")});function N(){var d,u;const a=D(),[v,t]=B.useState(!1),n=$(F),{register:o,handleSubmit:S,formState:{errors:r},watch:l,setValue:m}=I({mode:"onChange",resolver:U(H)}),C=async s=>{try{n===Y?await g.get(`/api/user/find-id?name=${s.name}&email=${s.email}`):n===_&&await g.get(`/api/admin/find-id?name=${s.name}&email=${s.email}`),j.fire({title:`${s.email} 이메일로 아이디가 전송되었습니다.`,icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(i=>{i.isConfirmed&&a("/auth")})}catch(i){j.fire({title:"이름과 이메일이 일치하지 않습니다.",icon:"error",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}),m("name",""),m("email",""),t(!1),console.log(i)}},w=s=>{console.log(s),t(i=>!i),C(s)},y=l("name"),b=l("email"),c=y&&b;return e.jsxs("div",{children:[e.jsxs(k,{style:{position:"relative"},children:[e.jsx(L,{children:e.jsx(R,{children:e.jsx(T,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>a(-1)})})}),e.jsx(V,{children:"아이디 찾기"}),e.jsx(E,{children:e.jsxs("form",{onSubmit:S(w),children:[e.jsxs(h,{children:[e.jsx(x,{type:"text",placeholder:"이름",...o("name")}),e.jsx(f,{children:(d=r.name)==null?void 0:d.message})]}),e.jsxs(h,{children:[e.jsx(x,{type:"email",placeholder:"이메일",...o("email")}),e.jsx(f,{children:(u=r.email)==null?void 0:u.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(q,{type:"submit",style:{backgroundColor:c?"#6F4CDB":"#ddd"},disabled:!c,children:"확인"})})]})})]}),v&&e.jsx(O,{})]})}export{N as default};
