import{u as D,c as h,e as F,r as $,d as A,j as e,L as E,H as L,f as T,x as z,F as I,T as R,k as m,m as f,U as t,Y as x,n as O,E as P,y as q,z as V,w as Y,p as g,q as j,S as H,A as Z,B as C,G as _}from"./index-C7S2opxg.js";const G=Z({newUpw:C().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:C().required("비밀번호 확인을 입력해주세요.").oneOf([_("newUpw")],"비밀번호가 일치하지 않습니다.")});function N(){var w,p;const r=D(),[v,S]=h.useState(!1),s=F($),{register:c,handleSubmit:y,formState:{errors:l},watch:d}=A({mode:"onChange",resolver:V(G)}),U=async i=>{try{const o=Y();console.log(o),s===t?(await g.put("/api/user/v3/upw",i,{headers:{Authorization:`Bearer ${o}`}}),j.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(a=>{a.isConfirmed&&r("/user/userInfo")})):s===H&&(await g.put("/api/admin/v3/upw",i,{headers:{Authorization:`Bearer ${o}`}}),j.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(a=>{a.isConfirmed&&r("/store")}))}catch(o){console.log(o)}},B=i=>{S(o=>!o),U({newUpw:i.newUpw})},b=d("newUpw"),k=d("pwConfirm"),n=b&&k;h.useEffect(()=>{console.log("계정 role 확인 : ",s)},[]);const u=e.jsxs(E,{style:{position:"relative"},children:[e.jsx(L,{children:e.jsx(T,{children:e.jsx(z,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>r(-1)})})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:y(B),children:[e.jsx(R,{children:"비밀번호 변경"}),e.jsxs(m,{children:[e.jsx(f,{type:"password",placeholder:"새 비밀번호",width:s===t?"100%":void 0,...c("newUpw")}),e.jsx(x,{children:(w=l.newUpw)==null?void 0:w.message})]}),e.jsxs(m,{children:[e.jsx(f,{type:"password",placeholder:"새 비밀번호 확인",width:s===t?"100%":void 0,...c("pwConfirm")}),e.jsx(x,{children:(p=l.pwConfirm)==null?void 0:p.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(O,{type:"submit",style:{backgroundColor:n?"#6F4CDB":"#ddd",cursor:n?"pointer":"not-allowed"},width:s===t?"100%":void 0,disabled:!n,children:"확인"})})]})})]});return e.jsxs(e.Fragment,{children:[s===t?e.jsx(P,{children:u}):u,v&&e.jsx(q,{})]})}export{N as default};
