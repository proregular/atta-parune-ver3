import{u as D,c as m,e as F,r as k,d as A,j as e,L,H as T,C as E,V as I,F as R,T as z,m as p,n as f,U as t,Y as x,o as O,$ as P,W as V,X as q,Q as Y,q as g,v as j,S as Z,Z as _,_ as C,a0 as H}from"./index-QD4sUlUr.js";const M=_({newUpw:C().required("비밀번호는 필수입니다.").min(8,"최소 8자 이상 작성해야 합니다.").max(16,"최대 16자까지 작성 가능합니다.").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]+$/,"비밀번호는 영어, 숫자, 특수문자만 가능합니다."),pwConfirm:C().required("비밀번호 확인을 입력해주세요.").oneOf([H("newUpw")],"비밀번호가 일치하지 않습니다.")});function Q(){var w,h;const r=D(),[v,S]=m.useState(!1),s=F(k),{register:c,handleSubmit:y,formState:{errors:l},watch:d}=A({mode:"onChange",resolver:q(M)}),U=async i=>{try{const o=Y();console.log(o),s===t?(await g.put("/api/user/v3/upw",i,{headers:{Authorization:`Bearer ${o}`}}),j.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(n=>{n.isConfirmed&&r("/user/userInfo")})):s===Z&&(await g.put("/api/admin/v3/upw",i,{headers:{Authorization:`Bearer ${o}`}}),j.fire({title:"비밀번호가 변경 되었습니다.",icon:"success",confirmButtonText:"확인",showConfirmButton:!0,allowOutsideClick:!1}).then(n=>{n.isConfirmed&&r("/store")}))}catch(o){console.log(o)}},B=i=>{S(o=>!o),U({newUpw:i.newUpw})},$=d("newUpw"),b=d("pwConfirm"),a=$&&b;m.useEffect(()=>{console.log("계정 role 확인 : ",s)},[]);const u=e.jsxs(L,{style:{position:"relative"},children:[e.jsx(T,{children:e.jsx(E,{children:e.jsx(I,{style:{width:"100%",height:"100%",cursor:"pointer"},onClick:()=>r(-1)})})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:y(B),children:[e.jsx(z,{children:"비밀번호 변경"}),e.jsxs(p,{children:[e.jsx(f,{type:"password",placeholder:"새 비밀번호",width:s===t?"100%":void 0,...c("newUpw")}),e.jsx(x,{children:(w=l.newUpw)==null?void 0:w.message})]}),e.jsxs(p,{children:[e.jsx(f,{type:"password",placeholder:"새 비밀번호 확인",width:s===t?"100%":void 0,...c("pwConfirm")}),e.jsx(x,{children:(h=l.pwConfirm)==null?void 0:h.message})]}),e.jsx("div",{style:{marginLeft:20,marginRight:20},children:e.jsx(O,{type:"submit",style:{backgroundColor:a?"#6F4CDB":"#ddd",cursor:a?"pointer":"not-allowed"},width:s===t?"100%":void 0,disabled:!a,children:"확인"})})]})})]});return e.jsxs(e.Fragment,{children:[s===t?e.jsx(P,{children:u}):u,v&&e.jsx(V,{})]})}export{Q as default};
